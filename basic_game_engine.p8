pico-8 cartridge // http://www.pico-8.com
version 8
__lua__
framerate = 60
--[[
btn (i (p))
  get button i state for player p (default 0)
  i: 0..5: left right up down button_o button_x
  p: player index 0..7

  If no parameters supplied, returns a bitfield of all 12 button states for player 0 & 1
    // P0: bits 0..5  P1: bits 8..13

  Default keyboard mappings to player buttons:
    player 0: cursors, Z,X / C,V / N,M
    player 1: ESDF, LSHIFT,A / TAB,Q,E


Colours indexes:
  	
  	 0  black   1  dark_blue   2  dark_purple   3  dark_green  
  	 4  brown   5  dark_gray   6  light_gray    7  white
  	 8  red     9  orange     10  yellow       11  green       
  	12  blue   13  indigo     14  pink         15  peach
]]--
--helpers
function ceil(_x)
  return flr(_x+1)
end
function sign(_x)
  if _x > 0 then
    return 1
  elseif _x < 0 then
    return -1
  else 
    return 0
  end
end
function round(_x)
  if abs(_x) % 1 >= .5 then
    if sign(_x) == 1 then
      return ceil(_x)
    else
      return flr(_x)
    end
  else
    if sign(_x) == 1 then
      return flr(_x)
    else
      return ceil(_x)
    end
  end
end
function bool_to_str(_bool)
  if _bool then
    return "true"
  else
    return "false"
  end
end
function stringify_table(_table,_tab)
  local function num_to_tab(_num) 
    local ret = ""
    for i=1,_num do
      ret = ret .. "    "
    end
    return ret
  end
  _table = _table or {}
  _tab = _tab or 0
  local ret = "\n" .. num_to_tab(_tab) .. "{\n"
  for k,v in pairs(_table) do
    if type(v) == "function" then
      ret = ret .. num_to_tab(_tab) .. k .. "=" .. k .. "()" .. '\n'
    elseif type(v) == "table" then
      ret = ret .. num_to_tab(_tab) .. k .. "=" .. stringify_table(v,_tab+1) .. '\n'
    elseif type(v) == "boolean" then
      ret = ret .. num_to_tab(_tab) .. k .. "=" .. bool_to_str(v) .. '\n'
    else
      ret = ret .. num_to_tab(_tab) .. k .. "=" .. v .. '\n'
    end
  end
  return ret .. num_to_tab(_tab) .. "}\n"
end

function empty()
end

function print_center(str,x,y,col)
  print(str,x+((4-#str*4)/2),y,col)
end

function exists(obj,search)
  for v in all(obj) do
    if v == search then
      return true
    end
  end
  return false
end

function in_range(_x,_a,_b)
  return _x >= _a and _x <= _b
end

function clamp(_x,_a,_b)
  if _x <= _a then
    return _a
  elseif _x <= _b then
    return _b
  else
    return _x
  end
end

--types
--Position
Position = {}
Position.CircularMotion = function(_pos,_frame,_radius,_speed)
  --returns a point on a circle centered at 0,0 based on a complete circle as speed 1 taking 1 second to complete
  return new_position(_pos.x+cos((_frame/framerate)*_speed)*_radius,_pos.y+sin((_frame/framerate)*_speed)*_radius)
end
Position.Magnitude = function(_pos)
  return sqrt(_pos.x*_pos.x + _pos.y*_pos.y)
end
Position.AproxEqual = function (_a,_b,_thresh)
  _thresh = _thresh or 1
  local dif = _a-_b
  if in_range(dif.x,-_thresh,_thresh) and in_range(dif.y,-_thresh,_thresh) then
    return true
  else 
    return false
  end
end
Position.ToWhole = function(_pos)
  return new_position(round(_pos.x),round(_pos.y))
end
Position.MoveTowards = function(_from,_to,_speed,_thresh)
  --Rec thresh of .2 or higher
  _speed,_thresh,_smooth = _speed or 1,_thresh or 1,_smooth or false
  if not Position.AproxEqual(_from,_to,_thresh) then
    return Position.ToWhole(_from + Position.ScalarMult(Position.Normalize(_to-_from),_speed))
  else
    return Position.ToWhole(_to)
  end
end
Position.ScalarMult = function(_pos,_scalar)
  return new_position(_pos.x*_scalar,_pos.y*_scalar)
end
Position.Normalize = function(_pos)
  return new_position(_pos.x/Position.Magnitude(_pos),_pos.y/Position.Magnitude(_pos))
end
Position.mt = {}
Position.mt.__add = function(_a,_b)
  return new_position(_a.x+_b.x,_a.y+_b.y)
end
Position.mt.__sub = function(_a,_b)
  return new_position(_a.x-_b.x,_a.y-_b.y)
end
Position.mt.__div = function(_pos,_scal)
  return new_position(_a.x/_scal,_a.y/_scal)
end
function new_position(_x,_y)
  local ret = {x=_x,y=_y}
  setmetatable(ret,Position.mt)
  return ret
end


function new_sprite(n,x,y,width,height,flipx,flipy)
  local draw = function (entity)
    spr(n,entity.position.x+x,entity.position.y+y,width,height,flipx,flipy)
  end
  return {draw=draw,n=n,x=x,y=y,width=width,height=height,flipx=flipx,flipy=flipy}
end
function new_rect(_x,_y,_width,_height)
  return {
          x=_x,
          y=_y,
          width=_width,
          height=_height
          }
end
function new_sequence(changee,frame_data,final_frame,changer,looping)
  --new_sequence may seem complex, but it's a simple solution to the many 
  --similar functions of changing some object's state depending on a frame in some sequence.
  --_changee is the object to be changed
  --_frame_data is an array, where the index represents the frame in which the data will be applied
  --_changer is some functions that takes the changee and the element of the current frame the object is on and applies that data to the changee
  --_looping is a boolean which determines if the object will persist again from frame 1 after completion 
  --tip: a sequence will not run on a frame with null _frame_data, so if [1] and [20] are occupied
  --a sequence will run on the first and 20ths and do nothing in between.
  local frame = 0
  
  local update = function ()
    --update is the function to be called each from to update the object to the current frame
    --update will return whether or not the sequence has completed its full sequence
    if frame_data[frame] != nil then
      changer(changee,frame_data[frame])
    end
    frame += 1
    if frame == final_frame then
      fin = true
      if looping then
        frame = 1
      end
    end
    return fin
  end
  
  local reset = function ()
    frame = 1
    fin = false
    changer(changee,frame_data[frame])
  end
  
  return {update=update,reset=reset}
end
function animator(_sprite,_sprite_data)
  _sprite.n = _sprite_data.n
  _sprite.x = _sprite_data.x
  _sprite.y = _sprite_data.y
  _sprite.width = _sprite_data.width
  _sprite.height = _sprite_data.height
end
function hitboxer(_hitbox,_hitbox_data)
  _hitbox.x = _hitbox_data.x
  _hitbox.y = _hitbox_data.y
  _hitbox.width = _hitbox_data.width
  _hitbox.height = _hitbox_data.height
  _hitbox.immaterial = _hitbox_data.immaterial
end
function new_hitbox(_x,_y,_width,_height,_tag,_immaterial)
  _x,_y,_width,_height,_tag,_immaterial = _x or 0, _y or 0, _width or 0, _height or 0, _tag or {}, _immaterial or false 
  return {x=_x,y=_y,width=_width,height=_height,tag=_tag,immaterial=_immaterial,collisions={}}
end
function new_body(_hitboxes,_collision)
  local draw = function (position)
    for hitbox in all(_hitboxes) do
      rect(position.x+hitbox.x,position.y+hitbox.y,position.x+hitbox.x+hitbox.width,position.y+hitbox.y+hitbox.height,11)
    end  
  end
  return {hitboxes=_hitboxes,collision=_collision,draw=draw}
end
function new_entity(_name,_tag,_position,_update,_draw,_body,_model,_z)
  --an entity is a data structure meant to be used by the game to create some effect
  --an entity is defined by the following:
  --name is a string to identify the object in memory
  --position is an object of the new_position function to provide a spatial position to the object
  --update is a function to be called each frame
  --draw is a function to be called each render
  --model is a table container for an entity's state
  --z is the z index to be drawn
  return {
          name=_name,
          tag=_tag,
          position=_position,
          update=_update,
          body=_body,
          draw=_draw,
          model=_model or {},
          z=_z or 0,
          frame=0
        }
end
function new_scene(_starting,_ending,_update,_draw,_late_update,_model)
  return {
        starting=_starting or empty,
        ending=_ending or empty,
        update=_update or empty,
        draw=_draw  or empty,
        late_update=_late_update  or empty,
        model=_model or {},
        frame=0
      }
end
--game
function new_game(_starting_scene)
    local active_scene = _starting_scene
    local entities = {}
    local game_camera = {x=0,y=0,width=126,height=126}
    local settings = {show_hitboxes=false,entities_active=true}
    local frame = 0
    local started = false
    
    local function interval_intersect(_x1,_x2,_y1,_y2)
      return max(_x1,_y1) <= min(_x2,_y2)
    end
    
    local function rect_intersect(_rect1,_rect2)
      return interval_intersect(_rect1.x,_rect1.x+_rect1.width,_rect2.x,_rect2.x+_rect2.width) and
      interval_intersect(_rect1.y,_rect1.y+_rect1.height,_rect2.y,_rect2.y+_rect2.height)
    end
    
    local function entity_collision(_fentity,_sentity)
      for _fhitbox in all(_fentity.body.hitboxes) do
        for _shitbox in all(_sentity.body.hitboxes) do
          if (not _fhitbox.immaterial and not _shitbox.immaterial and 
          rect_intersect(
          new_rect(_fentity.position.x+_fhitbox.x,_fentity.position.y+_fhitbox.y,_fhitbox.width,_fhitbox.height),
          new_rect(_sentity.position.x+_shitbox.x,_sentity.position.y+_shitbox.y,_shitbox.width,_shitbox.height))
          ) then
            _fentity.body.collision(_fentity,_sentity)
            _sentity.body.collision(_sentity,_fentity)
          end
        end
      end
    end
    
    local function exists_in_camera(_pos,_thresh)
      _thresh = _thresh or 0
      return (_pos.x+_thresh >= game_camera.x and _pos.x <= (game_camera.x+game_camera.width+_thresh) and
              (_pos.y+_thresh) >= game_camera.y and _pos.y <= (game_camera.y+game_camera.height+_thresh))
    end
    
    local function collision_update(_entities)
      for i=1,#_entities do
        for j=i+1,#_entities do
          if (exists_in_camera(_entities[i].position,32) and exists_in_camera(_entities[i].position,32)) then
            entity_collision(_entities[i],_entities[j])
          end
        end
      end
    end
    
    local rectcast = function (_rect)
      local ret = {}
      for entity in all(entities) do
        for hitbox in all(entity.body.hitboxes) do
          if rect_intersect(_rect, new_rect(entity.position.x+hitbox.x,entity.position.y+hitbox.y,hitbox.width,hitbox.height)) then
            add(ret,entity)
          end
        end
      end
      return ret
    end 
    
    local get_entities_on_camera = function (_thresh)
      local ret = {}
      _thresh = _thresh or 0
      for entity in all(entities) do
        if exists_in_camera(entity.position,_thresh) then
          add(ret,entity)
        end
      end
      return ret
    end
    --Entity API
    local add_entity = function (_entity)
      if (type(_entity) == "table" and _entity.name != nil) then
        add(entities,_entity)
      end
    end
    local remove_entity = function (_entity)
      del(entities,_entity)
    end
    local empty_entities = function ()
      for k,v in pairs(entities) do entities[k] = nil end
      entities = {}
    end
    local locate_entity_name = function (_name)
      local ret = {}
      for entity in all(entities) do
        if entity.name == _name then
          add(ret,entity)
        end
      end
      return ret
    end
    local locate_entity_tag = function (_tag)
      local ret = {}
      for entity in all(entities) do
        if exists(entity.tags,_tag) then
          add(ret,entity)
        end
      end
      return ret
    end
    local get_entities = function ()
      return entities
    end
    --Frame API
    local update = function ()
      --Update Scene
      active_scene.update()
      active_scene.frame += 1
      if settings.entities_active then
        --Detect Collision
        collision_update(entities)
        --Update Entities
        for entity in all(entities) do
          entity.update(entity)
          entity.frame += 1
        end 
      end
      frame += 1
    end
    local draw = function ()
      cls()
      camera(-game_camera.x,-game_camera.y)
      active_scene.draw()
      
      local function z_indexed()
        local ret,z_ordered,z_low,z_high = {},{},0,0
        for entity in all(entities) do
          if (entity.z < z_low) then
            z_low = entity.z
          end
          if (entity.z > z_high) then
            z_high = entity.z
          end
          if (z_ordered[entity.z] == nil) then
            z_ordered[entity.z] = {}
          end
          add(z_ordered[entity.z],entity)
        end
        for i=z_low,z_high do
          for entity in all(z_ordered[i]) do
            add(ret,entity)
          end
        end
        return ret
      end
      for entity in all(z_indexed()) do
        entity.draw(entity)
        if (settings.show_hitboxes == true) then
          entity.body.draw(entity.position)
        end
      end
    end
    return {
            get_frame = function()
              return frame
            end,
            start = function ()
              if started == false then
                printh("Starting Game")
                active_scene.starting()
                started = true
              end
            end,
            update=update,
            draw=draw,
            switch_scene=function (scene)
              active_scene.ending()
              active_scene = scene
              active_scene.starting()
            end,
            add_entity=add_entity,
            remove_entity=remove_entity,
            empty_entities=empty_entities,
            rectcast=rectcast,
            locate_entity_name=locate_entity_name,
            locate_entity_tag=locate_entity_tag,
            get_entities=get_entities,
            get_entities_on_camera=get_entities_on_camera,
            exists_in_camera=exists_in_camera,
            camera=game_camera,
            pause = function () 
              settings.entities_active = false
            end,
            unpause = function ()
              settings.entities_active = true
            end
            }
end

function data()
  --In this scope the objects which define a game are defined, along with scenes.
  local entity_data = {}
  entity_data.baddy = function (_x,_y,_to,_type)
    local sprite = new_sprite(4,0,0,2,2,false,false)
    return new_entity("baddy",
          {"enemy"},
          new_position(_x,_y),
          function (entity)
            if _type then
              entity.position = Position.CircularMotion(entity.position,entity.frame,4,1)
              printh("second: " .. entity.frame/60 .. "pos:" .. stringify_table(entity.position))
            else
              entity.position.x += 1
              entity.position.y += 1
            end
          end,
          function (entity)
            sprite.draw(entity)
          end,
          new_body({new_hitbox(0,8,16,8)}, 
          function (entity,coll)
          end),
          {state="start",left=0,right=0,turn="left"}
          ) end
  --scenes
  local scene_data = {}
  scene_data.init = 
  function ()
    return new_scene(function ()
                      game.add_entity(data.entities.baddy(32,32,new_position(64,64),true))
                    end,
                    nil,
                    function ()
                    end,
                    nil,
                    nil)
  end
  
  return {entities=entity_data,scenes=scene_data}
end
--extensions
function extensions()
  function stage_builder()
    --[[
      stage_builder is an extension meant to provide methods for the production of a stage,
      
      the first being manual(), a function which takes an entity_name, and an object as an arg for entity construction
      and will build a single entity for the stage
      
      the second being tiler(), a function meant to construct a mass of entities in a grid like format and adds them all to the stage
      
      finally the method build() will actually spawn the stage into the game
    ]]--
    local stage = {}
    local manual = function(entity_name,args)
      local entity = data.entity[entity_name](args)
      add(stage,entity)
    end
    local tiler = function(context,map,size_x,size_y,x,y,arg)
      --[[
      context is an object where each key is a single character, and each value is an entity key in data.entity, this is to make maps in a more convenient manner
      
      map is a string which is a representation of a stage to be constructed and obeys the following laws
      as a string map is a series of chars
      each char represents an operation, either to build an entity specified by context, '-' for a non space, or '|' for the next row
      each entity to be added to the stage will be placed according to its position in the map, 
      where from left to right each entity is seperated by 'size' in its x position starting from the argument x
      and each entity will be pushed up on the y access per row shift.
      
      size_x and size_y will determine the displacement between each entity per column or row shift respectively
      
      x and y will determine the starting location 
      
      example:
      context = {b=baddy,t=tile,p=player}
      map = "p----b|
             tttttt"
      size_x = 16
      size_y = 16
      x = 0
      y = 0
      
      will create a stage where a player spawns at the 0,0 then later a baddy will be spawned at 80,0
      then on the next row a series of tiles will be spawned in a row from left to right at y=16
      ]]--
      local running_x,running_y = x,y
      for i=1, #map do
        local c = sub(map,i,i)
        if c == '-' then
          running_x += size_x
        elseif c == '|' then
          running_x = x
          running_y += size_y
        else
          local entity = data.entity[context[c]](arg)
          entity.position.x = running_x
          entity.position.y = running_y
          add(stage,entity)
          running_x += size_x
        end 
      end
    end
    local build = function()
      --game.empty_entities()
      for ent in all(stage) do
        --game.add_entity(ent)
      end
    end
    return {manual=manual,tiler=tiler,build=build}
  end
  extensions = {}
  extensions.stage_builder = stage_builder()
  return extensions
end

--pico
function _init()
  --Initialize Three Global objects
  --data: object which contains entity, scene, and starting_scene.
  --extensions: object which contains singular services to be called on
  --new_game: object which operates the game
  data = data()
  extensions = extensions()
  game = new_game(data.scenes.init())
  game.start()
end
function _update60()
  game.update()
end
function _draw()
  game.draw()
end

__gfx__
0000000000000000eeeeeeeeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000007ee7e7ee7ee7e7ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0006660000666000ee77e7eeee77e7ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00666600006666007777e7777777e777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00666060060666007777777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06660606606066607777777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0660606dd60606607ccc77cc7ccc77cc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0660606dd6060660cccccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0606060660606060eeeeeeeeeeeeeeee008888888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000
06060606606060607ee7e7ee7ee7e7ee080080800000000800000000000000000000000000000000000000000000000000000000000000000000000000000000
0660606006060660ee77e7eeee77e7ee800000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000
06660600006066607777e7777777e777800800800000000800000000000000000000000000000000000000000000000000000000000000000000000000000000
06666000000666607777777777777777080088000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000
06666600006666607777777777777777008888888888888000000000000000000000000000000000000000000000000000000000000000000000000000000000
00666600006666007ccc77cc7ccc77cc000800800008080000000000000000000000000000000000000000000000000000000000000000000000000000000000
0006660000666000cccccccccccccccc008008000080008000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007000007000000000700000700000000070000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007000007000000000700000700000000070000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005720275000000000572027500000000057202750000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000222220000000000022222000000000002222200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000200020000000000020002000000000002000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000220220000000000022022000000000002202200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00022000002200000002200000220000000220000022000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00200220220020000020022022002000002002202200200000000000000000000000000000000000000000000000000000000000000000000000000000000000
00020202020200000002020202020000000202020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000220220000000000022022000000000002202200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000200020000000000020002000000000002000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000022200000000000002222000000000000222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000200020000000000002002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000200020000000000020220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00002200022000000000002022000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344
00 41424344

